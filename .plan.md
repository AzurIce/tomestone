# 实现计划: FF14 装备浏览器 + 染色预览

## 当前状态
- Milestone 1 已完成: ironworks 可以读取 SqPack, Excel 表, MDL, TEX 文件
- 技术栈: ironworks + eframe/egui + wgpu

## 迭代路线

### Milestone 2: 装备数据层
1. 写一个列检查工具，dump Item 表的列类型和索引
2. 根据列类型映射出 Name, ModelMain, EquipSlotCategory 等字段的列索引
3. 创建 `src/game_data.rs` 模块:
   - `GameData` struct: 封装 ironworks 初始化 (路径配置, 中文语言)
   - `EquipmentItem` struct: name, model_id, variant_id, slot, icon_id
   - `load_equipment_list()`: 遍历 Item 表，过滤出可装备物品
4. ModelMain 解码: low 16 bits = set_id, high 16 bits = variant_id
5. 验证: 打印前 20 件装备的名称和模型路径

### Milestone 3: egui 窗口 + 装备浏览 UI
1. 添加 eframe/egui 依赖
2. 创建主窗口，左侧装备列表面板 (按槽位分类)
3. 搜索/过滤功能
4. 选中装备时显示基本信息 (名称、模型路径)

### Milestone 4: MDL 模型渲染
1. 添加 wgpu 依赖
2. 解析 MDL 文件 → 提取顶点/索引数据
3. 创建 wgpu 渲染管线 (基础 WGSL shader)
4. 在 egui 窗口中嵌入 3D 视口
5. 轨道相机控制 (旋转/缩放)

### Milestone 5: 纹理加载
1. 解析 TEX 文件 (BCn 解码)
2. 加载 diffuse/normal/specular 纹理
3. 在 shader 中应用纹理

### Milestone 6: 染色预览
1. 解析 MTRL 材质 (ColorTable + ColorDyeTable)
2. 读取 Stain 表 (染料数据)
3. 实现染色 shader (colorset 混合)
4. UI: 染料选择器

## 下一步: 执行 Milestone 2
